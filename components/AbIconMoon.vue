<template>
	<svg class="ab-icon-moon" viewBox="0 0 400 400">
		<defs>
			<clipPath id="myClip">
				<path
					:d="path"
					:transform="`rotate(${positionAngle / Math.PI * 180 - 90})`"
					class="clip-path"
				/>
			</clipPath>
		</defs>
		<circle class="shadow" cx="200" cy="200" r="200" />
		<g clip-path="url(#myClip)" transform="translate(200 200)">
			<g transform="translate(-250 -250)">
				<circle class="moon" cx="250" cy="250" r="200" />
				<g>
					<path class="mare" d="M260.43,172.7c-9.18-4.4-5.14-1.1-10.35-.37-4,.55-42.73,35.26-40.66,8.19,17.14-11.8,8.2-13.23,5.88-34.08,1.1-12.32,12.84-3.46,20.91-5.66C253.84,129.57,246.34,109,223,99.68c-13.21-9.53-25.9-2.56-47,0s-6.61,5.51-14,9.18-11.64,7.7-20.44,9.54-8.44,15.41-19.45,24.95c-16,16.59-8.68-39.12-24.95-33-47.83,25.9-38.92,37.42-41.83,88.79,5.88,18.55-9,28.48,5.87,47.33,14.59,23.49-1,25.95,26.42,42.93,13.58,8.07,12.84,13.94,14.66,18.34,9.44,13.93,32.82,11.31,42.21-5.26,44.35,10.25-31,58.35,35.6,51.86,7.75-4.11-10.83-34.37,7.89-55.4,7.17-14.68,5.31,1.1,9.35,3.55,14.86,6.58,4.59,23.73,16.87,36.08,13.79,11.17,51.42-14.89,35.9-36.09-15-21.87,1.12-16.54-19-38-33.52-30.18,53.92-38.66,8.43-50.94-16.94-36.93,43-5,38.53-33C278,170.74,269.6,177.1,260.43,172.7Z" />
					<path class="mare" d="M356.56,147c-6.65-3.17-18.25,16.78-27.15-1.1-15.11-15.8-16.87-36.59-7.34-48.32-7-8.18-20.53-1.67-23.85,6.85-4.64,8.89-24.08,1-32.29,5.71-32.8,24.75,15.28,62.29,41.83,47.13,11.74-12.66-6.87,39.89,13.58,50.63,18.26.53,22.73,11.3,25.3,26.64,8.85,13.25,20.37,6.19,25.33,24,2.44,27.33,23.38,6.37,16.15-8.69-7.71-10-21.29-5-23.49-12.47s-13.21-25.81-8.07-32c23.5-26.31,29.28,16.81,37.42,28.23,16.06-.37,9.95,15.92,24.71,22.77C425.68,147.14,389.62,197.5,356.56,147Z" />
					<path class="mare" d="M406.82,161.69c20.08-4.81,2.6-36.72-15-37.42C358.88,122.58,394.74,160.67,406.82,161.69Z" />
				</g>
				<g>
					<circle class="crater" cx="262.73" cy="374.39" r="13.7" />
					<circle class="crater" cx="182.11" cy="213.48" r="20.12" />
					<circle class="crater" cx="102.27" cy="191.78" r="11.25" />
					<circle class="crater" cx="194.59" cy="90.98" r="6.62" />
					<circle class="crater" cx="79.29" cy="305.87" r="10.53" />
					<circle class="crater" cx="116.1" cy="361.96" r="11.32" />
					<circle class="crater" cx="132.5" cy="237.4" r="15.1" />
					<circle class="crater" cx="430.43" cy="226.97" r="7.58" />
					<circle class="crater" cx="411.1" cy="310.05" r="7.58" />
				</g>
			</g>
		</g>
	</svg>
</template>

<script>
export default {
	props: {
		positionAngle: { type: Number, default: 0 },
		illuminated: { type: Number, default: 1 }
	},
	computed: {
		path () {
			const a = this.illuminated * 2 - 1
			const r = 200
			const r2 = a * r
			const k = 0.5522847498
			const k2 = Math.abs((k - 0.1) * a) + 0.1
			return `M 0 ${r}	
				C ${r2 * k2} ${r}, ${r2} ${r * k}, ${r2} 0
				S ${r2 * k2} ${-r}, 0 ${-r}
				C ${-r * k} ${-r}, ${-r} ${-r * k}, ${-r} 0
				S ${-r * k} ${r}, 0 ${r}`
		}
	}
}
</script>

<style scoped>
	.shadow {
		fill: theme('colors.black');
	}

	.moon {
		fill: theme('colors.gray.200');
	}

	.mare {
		fill: theme('colors.gray.400');
	}

	.crater {
		fill: theme('colors.gray.100');
		stroke: theme('colors.gray.500');
		stroke-width: 5;
	}
</style>
